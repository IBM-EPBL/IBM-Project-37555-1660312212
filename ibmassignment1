#include <Servo.h>
Int output1Value = 0;
Int sen1Value = 0;
Int sen2Value = 0;
Int const gas_sensor = A1;
Int const LDR = A0;
Int limit = 400;
Long readUltrasonicDistance(int triggerPin, int echoPin)
{
pinMode(triggerPin, OUTPUT); // Clear the trigger
digitalWrite(triggerPin, LOW);
delayMicroseconds(2);
// Sets the trigger pin to HIGH state for 10 microseconds
digitalWrite(triggerPin, HIGH);
delayMicroseconds(10);
digitalWrite(triggerPin, LOW);
pinMode(echoPin, INPUT);
// Reads the echo pin, and returns the sound wave travel time in microseconds
Return pulseIn(echoPin, HIGH);
}
Servo servo_7;
Void setup()
{
Serial.begin(9600); //initialize serial communication
pinMode(A0, INPUT); //LDR
pinMode(A1,INPUT); //gas sensor
pinMode(13, OUTPUT); //connected to relay
servo_7.attach(7, 500, 2500); //servo motor
pinMode(8,OUTPUT); //signal to piezo buzzer
pinMode(9, INPUT); //signal to PIR
pinMode(10, OUTPUT); //signal to npn as switch
pinMode(4, OUTPUT); //Red LED
pinMode(3, OUTPUT); //Green LED
}
Void loop()
{
//------light intensity control------//
//--------------------------------------------------------------
Int val1 = analogRead(LDR);
If (val1 > 500)
{
digitalWrite(13, LOW);
Serial.print(“Bulb ON = “);
Serial.print(val1);
}
Else
{
digitalWrite(13, HIGH);
Serial.print(“Bulb OFF = “);
Serial.print(val1);
}
//--------------------------------------------------------------
//------ light & fan control --------//
//--------------------------------------------------------------
Sen2Value = digitalRead(9);
If (sen2Value == 0)
{
digitalWrite(10, LOW); //npn as switch OFF
digitalWrite(4, HIGH); // Red LED ON,indicating no motion
digitalWrite(3, LOW); //Green LED OFF, since no Motion detected
Serial.print(“ || NO Motion Detected “ );
}
If (sen2Value == 1)
{
digitalWrite(10, HIGH);//npn as switch ON
delay(3000);
digitalWrite(4, LOW); // RED LED OFF
digitalWrite(3, HIGH);//GREEN LED ON , indicating motion detected
Serial.print(“ || Motion Detected! “ );
}
Delay(300);
//---------------------------------------------------------------
// ------- Gas Sensor --------//
//---------------------------------------------------------------
Int val = analogRead(gas_sensor); //read sensor value
Serial.print(“|| Gas Sensor Value = “);
Serial.print(val); //Printing in serial monitor
//val = map(val, 300, 750, 0, 100);
If (val > limit)
{
Tone(8, 650);
}
Delay(300);
noTone(8);
//--------------------------------------------------------------
//------- servo motor ---------//
//-------------------------------------------------------------
Sen1Value = 0.01723 * readUltrasonicDistance(6, 6);
If (sen1Value < 100)
{
Servo_7.write(90);
Serial.print(“ || Door Open! ; Distance = “);
Serial.print(sen1Value);
Serial.print(“\n”);
}
Else
{
Servo_7.write(0);
Serial.print(“ || Door Closed! ; Distance = “);
Serial.print(sen1Value);
Serial.print(“\n”);
}
Delay(10); // Delay a little bit to improve simulation performance
• }
